/**
 * jQuery.ddTools
 * @version 2.3.1 (2020-03-13)
 * 
 * @desc A library with various tools facilitating your work.
 * 
 * @requires jQuery >= 1.11.1.
 * 
 * @copyright 2011â€“2020 [DivanDesign]{@link http://www.DivanDesign.biz }
 */

(function(b){b.ddTools={$html:b(),$window:b(),$body:b(),windowWidth:0,windowHeight:0,windowScrollTop:0,scrollbarSize:0,cookieOpt:{expires:365,path:"/"},ddErrorData:{title:"\u041d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 =(",message:"\u0412\u043e \u0432\u0441\u0435\u043b\u0435\u043d\u043d\u043e\u0439 \u0441\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u0447\u0442\u043e-\u0442\u043e \u0443\u0436\u0430\u0441\u043d\u043e\u0435 \u0438 \u043d\u0435\u043f\u043e\u043d\u044f\u0442\u043d\u043e\u0435.<br />\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0447\u0443\u0442\u044c \u043f\u043e\u0437\u0436\u0435.",
email:"info@divandesign.ru",$dialog:!1},parseInt:function(a){a="undefined"==b.type(a)?"0":a+"";return(a=parseInt(a.replace(/[^\d-]/g,""),10))||0},parseFloat:function(a,c){a="undefined"==b.type(a)?"0":a+"";a=parseFloat(a.replace(/[^\d\-\+.,]/g,"").replace(/,/g,"."))||0;b.isNumeric(c)&&(a=parseFloat(a.toFixed(c)));return a||0},numberFormat:function(a){return a.toString().replace(/(\d)(?=(\d{3})+\D|(\d{3})+$)/g,"$1 ")},loopArrayIndex:function(a){var b=a.index;0>a.index?b=a.array.length+a.index:a.index>=
a.array.length&&(b=a.index-a.array.length);return b},getObjectKeys:function(a){var c=[];return c="undefined"!=typeof Object.keys?Object.keys(a):b.map(a,function(a,b){return b})},objectToJSON:function(a){if(JSON&&b.isFunction(JSON.stringify))return JSON.stringify(a);var c=[],d=b.isPlainObject(a),g="",h="";d?(g="{",h="}"):b.isArray(a)&&(g="[",h="]");for(var k in a){var f=a[k];b.isPlainObject(f)||b.isArray(f)?f=b.ddTools.objectToJSON(f):"number"!=b.type(f)&&(f='"'+f+'"');d?c.push('"'+k+'":'+f):b.isArray(a)&&
c.push(f)}return g+c.join(",")+h},parseText:function(a){a=b.extend({removeEmptyPlaceholders:!1},a);var c=a.text,d=function(a,c){var f={};c||(c="");for(var e in a)b.isPlainObject(a[e])?b.extend(f,d(a[e],c+e+".")):f[c+e]=a[e];return f};a.data=d(a.data);for(var g in a.data)c=c.replace(new RegExp("\\[\\+"+g+"\\+\\]","gm"),a.data[g]);a.removeEmptyPlaceholders&&(c=c.replace(/\[\+\S+\+\]/gm,""));return c},padej:function(a,c){b.isArray(c)||(c=c.split(","));var d=a%100;10<=d&&19>=d?d=c[0]:(d=a%10,d=1==d?c[1]:
1<d&&5>d?c[2]:c[0]);return d},verifyRenamedParams:function(a){a=b.extend({source:"undefined"},a);var c=[];b.each(a.compliance,function(d,h){"undefined"!=b.type(a.params[h])&&"undefined"==b.type(a.params[d])&&(a.params[d]=a.params[h],delete a.params[h],c.push("\u201c"+h+"\u201d must be renamed as \u201c"+d+"\u201d;"))});if(0<c.length){console.group(a.source);console.warn("Some of the parameters have been renamed. Please, correct the following parameters:");for(var d=0;d<c.length;d++)console.warn(c[d]);
console.groupEnd()}},preloadImages:function(){var a=!1;"function"==typeof arguments[arguments.length-1]&&(a=arguments[arguments.length-1]);var c=b.type(arguments[0]);if("array"==c){var d=arguments[0];var g=d.length}else d=arguments,g=d.length-1;for(var h=g,k=0;k<=g;k++){var f="object"==c?b(d[k]).attr("src"):d[k];"string"==b.type(f)&&b(new Image).on("load",function(){1>--h&&"function"==typeof a&&a()}).attr("src",f)}},getDate:function(a){a=b.extend({date:"",format:"d.m.y",shortFormat:"",curDate:"",
lang:"ru2",lowerCase:!0},a||{});var c=function(a){""==a?a=new Date:(a=new Date(a),b.isNumeric(a.getTime())||(a=new Date));return a},d=function(a,b){return(a+="").length<b?Array(++b-a.length).join("0")+a:a};if("en"==a.lang){var g="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");var h={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"};var k=" January February March April May June July August September October November December".split(" ");var f=["Today","Yesterday","Day before yesterday"]}else g=
"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0412\u0442\u043e\u0440\u043d\u0438\u043a \u0421\u0440\u0435\u0434\u0430 \u0427\u0435\u0442\u0432\u0435\u0440\u0433 \u041f\u044f\u0442\u043d\u0438\u0446\u0430 \u0421\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),h={1:"\u043e\u0435",2:"\u043e\u0435",3:"\u0435\u0435",21:"\u043e\u0435",22:"\u043e\u0435",23:"\u0435\u0435",31:"\u043e\u0435"},f=["\u0421\u0435\u0433\u043e\u0434\u043d\u044f",
"\u0412\u0447\u0435\u0440\u0430","\u041f\u043e\u0437\u0430\u0432\u0447\u0435\u0440\u0430"],k="ru"==a.lang?" \u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "):
" \u042f\u043d\u0432\u0430\u0440\u044f \u0424\u0435\u0432\u0440\u0430\u043b\u044f \u041c\u0430\u0440\u0442\u0430 \u0410\u043f\u0440\u0435\u043b\u044f \u041c\u0430\u044f \u0418\u044e\u043d\u044f \u0418\u044e\u043b\u044f \u0410\u0432\u0433\u0443\u0441\u0442\u0430 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u041e\u043a\u0442\u044f\u0431\u0440\u044f \u041d\u043e\u044f\u0431\u0440\u044f \u0414\u0435\u043a\u0430\u0431\u0440\u044f".split(" ");a.curDate=c(a.curDate);a.date=""==a.date?a.curDate:c(a.date);
""!=a.shortFormat&&(c=a.curDate.getDate()-a.date.getDate(),1>c?a.format=a.shortFormat.replace("short",f[0]):2>c?a.format=a.shortFormat.replace("short",f[1]):3>c&&(a.format=a.shortFormat.replace("short",f[2])));var e={d:function(){return d(e.j(),2)},D:function(){t=e.l();return t.substr(0,3)},j:function(){return a.date.getDate()},l:function(){return g[e.w()]},N:function(){return e.w()+1},S:function(){return h[e.j()]?h[e.j()]:"th"},w:function(){return a.date.getDay()},z:function(){return(a.date-new Date(a.date.getFullYear()+
"/1/1"))/864E5>>0},W:function(){var b=e.z(),c=364+e.L()-b,d=((new Date(a.date.getFullYear()+"/1/1")).getDay()||7)-1;return 2>=c&&(a.date.getDay()||7)-1<=2-c?1:2>=b&&4<=d&&b>=6-d?(b=new Date(a.date.getFullYear()-1+"/12/31"),date("W",Math.round(b.getTime()/1E3))):1+(3>=d?(b+d)/7:(b-(7-d))/7)>>0},F:function(){return k[e.n()]},m:function(){return d(e.n(),2)},M:function(){t=e.F();return t.substr(0,3)},n:function(){return a.date.getMonth()+1},t:function(){var b;return 2==(b=a.date.getMonth()+1)?28+e.L():
b&1&&8>b||!(b&1)&&7<b?31:30},L:function(){var a=e.Y();return a&3||!(a%100)&&a%400?0:1},Y:function(){return a.date.getFullYear()},y:function(){return(a.date.getFullYear()+"").slice(2)},a:function(){return 11<a.date.getHours()?"pm":"am"},A:function(){return e.a().toUpperCase()},B:function(){var b=60*(a.date.getTimezoneOffset()+60);b=3600*a.date.getHours()+60*a.date.getMinutes()+a.date.getSeconds()+b;b=Math.floor(b/86.4);1E3<b&&(b-=1E3);0>b&&(b+=1E3);1==String(b).length&&(b="00"+b);2==String(b).length&&
(b="0"+b);return b},g:function(){return a.date.getHours()%12||12},G:function(){return a.date.getHours()},h:function(){return d(e.g(),2)},H:function(){return d(a.date.getHours(),2)},i:function(){return d(a.date.getMinutes(),2)},s:function(){return d(a.date.getSeconds(),2)},O:function(){var b=d(Math.abs(a.date.getTimezoneOffset()/60*100),4);return b=0<a.date.getTimezoneOffset()?"-"+b:"+"+b},P:function(){var a=e.O();return a.substr(0,3)+":"+a.substr(3,2)},c:function(){return e.Y()+"-"+e.m()+"-"+e.d()+
"T"+e.h()+":"+e.i()+":"+e.s()+e.P()},U:function(){return Math.round(a.date.getTime()/1E3)}};f=a.format.replace(/[\\]?([a-zA-Z])/g,function(a,b){return a!=b?b:e[b]?e[b]():b});a.lowerCase&&(f=f.toLowerCase());return f}};b.fn.ddSerializeToPlain=function(a){a=b.extend({ignoreInvisible:!0},a);var c=b(this),d=['input[type!="checkbox"][type!="radio"]','input[type="checkbox"]:checked',"input[type=radio]:checked","textarea","select"];if(a.ignoreInvisible)for(a=0;a<d.length;a++)d[a]+=":visible";d.push('input[type="hidden"]');
var g={};c.find(':input[name][name!=""]').not("[disabled]").filter(d.join(",")).each(function(){var a=b(this),c=a.attr("name");a=a.val();if("]"!=c.substr(-1))g[c]=a;else{var d=c.indexOf("["),e=-1,m=c.substr(d),l=g;for(c=c.substr(0,d);-1!=(d=m.indexOf("["))&&-1!=(e=m.indexOf("]"));)d=m.substring(d+1,e),""==d||b.isNumeric(d)?b.isArray(l[c])||(l[c]=[]):b.isPlainObject(l[c])||(l[c]={}),""==d&&(d=l[c].length),e+1==m.length?(l[c][d]=a,m=""):(m=m.substr(e+1),l=l[c],c=d)}});return g};b(function(){b.ddTools.$html=
b("html");b.ddTools.$window=b(window);b.ddTools.$body=b("body");b.ddTools.$window.on("resize",function(){b.ddTools.windowWidth=b.ddTools.$window.width();b.ddTools.windowHeight=b.ddTools.$window.height()}).trigger("resize");var a=b("<div></div>").css({width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px","z-index":"0"}).appendTo(b.ddTools.$body);b.ddTools.scrollbarSize=a.get(0).offsetWidth-a.get(0).clientWidth;a.remove();b.ddTools.$window.on("scroll",function(){b.ddTools.windowScrollTop=
b.ddTools.$window.scrollTop()}).trigger("scroll");b.ddTools.$body.on("ddError",function(a){if(!b.isPlainObject(a.ddError)||b.isEmptyObject(a.ddError))a.ddError={};a.ddError.title&&a.ddError.message||(a.ddError=b.extend({title:b.ddTools.ddErrorData.title,message:b.ddTools.ddErrorData.message},a.ddError));a.ddError.target||(a.ddError.target="unknown_"+window.location.toString());a.ddError.message+='<br /><small>\u0410 \u0435\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0435 \u0442\u0440\u0443\u0434\u043d\u043e, \u043e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u043d\u0430 <a href="mailto:'+
b.ddTools.ddErrorData.email+'">'+b.ddTools.ddErrorData.email+'</a> \u0430\u0434\u0440\u0435\u0441 \u0441\u0430\u0439\u0442\u0430 \u0438 \u043a\u043e\u0434 \u043e\u0448\u0438\u0431\u043a\u0438: "'+a.ddError.target+'".</small>';b.ddTools.ddErrorData.$dialog?(b.ddTools.ddErrorData.$dialog.data("ddMessage",a.ddError.message),b.ddTools.ddErrorData.$dialog.dialog("option","title",a.ddError.title),b.ddTools.ddErrorData.$dialog.dialog("open")):console&&b.isFunction(console.log)&&console.log(a.ddError)})})})(jQuery);