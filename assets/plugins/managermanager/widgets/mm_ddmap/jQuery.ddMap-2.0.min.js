/* jQuery.ddMap v2.0 (2023-05-22) | Â© https://Ronef.ru */
!function(e){class t{static isStaticInited=!1;static initStatic(t){if(!this.isStaticInited&&(this.isStaticInited=!0,"undefined"==typeof ymaps)){var n="//api-maps.yandex.ru/2.1/?lang="+navigator.language;t.apiKey.length>0&&(n+="&apikey="+t.apiKey),e("head").append('<script defer src="'+n+'"><\/script>')}}constructor(e){var t=this,n=t.constructor;t.markers=new Array,t.$element="map",t.defaultZoom=15,t.defaultType="map",t.scrollZoom=!1,t.mapCenterOffset=!1,t.markerOptions={},t.controls=[{name:"zoomControl"},{name:"typeSelector"},{name:"fullscreenControl"},{name:"geolocationControl"},{name:"rulerControl"}],t.mapOptions={suppressMapOpenBlock:!0},t.apiConnectionAttempts=0,t.setProps(e),n.initStatic({apiKey:void 0===e.apiKey?"":e.apiKey}),t.constructor_init()}constructor_init(){var t=this;"undefined"==typeof ymaps?(t.apiConnectionAttempts++,t.apiConnectionAttempts<10&&setTimeout(t.constructor_init.bind(t),500+100*t.apiConnectionAttempts)):ymaps.ready((function(){var n=t.prepareMarkers(),r=n.getLength();if(r>0){t.$element=e(t.$element),t.$element.trigger("ddBeforeInit"),t.$element.empty(),0==t.$element.height()&&t.$element.height(400);var a=new ymaps.Map(t.$element.get(0),{center:n.get(0).geometry.getCoordinates(),zoom:t.defaultZoom,type:"yandex#"+t.defaultType,controls:[]},t.mapOptions);if(Array.isArray(t.controls)&&t.controls.forEach((e=>{e.name&&a.controls.add(e.name,e.options)})),t.scrollZoom||a.behaviors.disable("scrollZoom"),a.geoObjects.add(n),r>1&&(t.$element.is(":hidden")?a.events.once("sizechange",(function(){a.setBounds(n.getBounds())})):a.setBounds(n.getBounds())),Array.isArray(t.mapCenterOffset)&&2==t.mapCenterOffset.length){var o=a.getGlobalPixelCenter();a.setGlobalPixelCenter([o[0]-t.mapCenterOffset[0],o[1]-t.mapCenterOffset[1]])}t.$element.on("resize",(()=>{a.container.fitToViewport()})).data("ddMap",{map:a}).trigger("ddAfterInit")}}))}prepareMarkers(){var t=this,n=new ymaps.GeoObjectCollection;return Array.isArray(t.markers)?(2==t.markers.length&&e.isNumeric(t.markers[0])&&e.isNumeric(t.markers[1])?n.add(new ymaps.Placemark(t.markers,{},t.markerOptions)):t.markers.forEach((r=>{e.isPlainObject(r)&&Array.isArray(r.latLng)&&2==r.latLng.length&&n.add(new ymaps.Placemark(r.latLng,{balloonContent:"string"==typeof r.content?e.trim(r.content):""},t.markerOptions))})),n):n}setProps(t){var n=this;e.isPlainObject(t)&&Object.entries(t).forEach((([t,r])=>{void 0!==n[t]&&(e.isPlainObject(n[t])?e.extend(n[t],r):n[t]=r)}))}}e.fn.ddMap=function(n){return e(this).each((function(){new t(e.extend(n,{$element:this}))}))}}(jQuery);