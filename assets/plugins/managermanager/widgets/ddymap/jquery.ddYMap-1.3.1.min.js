/**
 * jQuery ddYMap Plugin
 * @version 1.3.1 (2014-07-24)
 * 
 * @desc A jQuery library that allows Yandex.Maps to be rendered on a page in a simple way.
 * 
 * @uses jQuery 1.10.2.
 * @uses Yandex.Maps 2.1.
 * 
 * Parameters of the “$.fn.ddYMap” method (transferred as plain object).
 * @param placemarks {array} - Array of placemarks to be put on the map. If there is more than one placemark, the map will be scaled to make all the placemarks visible. Also, a pair of coordinates still can be passed (like it was in 1.2 and earlier). @required
 * @param placemarks[i] {plain object} - Placemark data. @required
 * @param placemarks[i].latLng {array} - Placemark coordinates (latitude and longitude). @required
 * @param placemarks[i].content {string: html} - Balloon content. Default: ''.
 * @param defaultZoom {integer} - Default map zoom. Default: 15.
 * @param defaultType {'map'; 'satellite'; 'hybrid'; 'publicMap'; 'publicMapHybrid'} - Default map type: 'map' — schematic map, 'satellite' — satellite map, 'hybrid' — hybrid map, 'publicMap' — public map, 'publicMapHybrid' - hybrid public map. Default: 'map';
 * @param scrollZoom {boolean} - Allow zoom while scrolling. Default: false.
 * @param mapCenterOffset {array} - Center offset of the map with respect to the center of the map container in pixels. Default: [0, 0].
 * @param placemarkOptions {plain object} - Placemark options. Default: {}.
 * 
 * @link http://code.divandesign.biz/jquery/ddymap/1.3.1
 * 
 * @copyright 2014, DivanDesign
 * http://www.DivanDesign.biz
 */

(function(b){b.extend(!0,{ddYMap:{defaults:{placemarks:[],element:"map",defaultZoom:15,defaultType:"map",scrollZoom:!1,mapCenterOffset:!1,placemarkOptions:{}},verifyRenamedParams:function(a,e){var c={},f=[];b.each(e,function(d,e){"undefined"!=b.type(a[e])&&"undefined"==b.type(a[d])&&(c[d]=a[e],f.push("\u201c"+e+"\u201d must be renamed as \u201c"+d+"\u201d;"))});if(0<f.length){console.group("$.ddYMap");console.warn("Some of the parameters have been renamed. Please, correct the following parameters:");
for(var d=0;d<f.length;d++)console.warn(f[d]);console.groupEnd()}return c},preparePlacemarks:function(a){var e=new ymaps.GeoObjectCollection;if(!b.isArray(a.placemarks))return e;if(2==a.placemarks.length&&b.isNumeric(a.placemarks[0])&&b.isNumeric(a.placemarks[1]))e.add(new ymaps.Placemark(a.placemarks,{},a.placemarkOptions));else for(var c=0;c<a.placemarks.length;c++)b.isPlainObject(a.placemarks[c])&&b.isArray(a.placemarks[c].latLng)&&2==a.placemarks[c].latLng.length&&e.add(new ymaps.Placemark(a.placemarks[c].latLng,
{balloonContent:"string"==b.type(a.placemarks[c].content)?b.trim(a.placemarks[c].content):""},a.placemarkOptions));return e},init:function(a){var e=this;b.extend(a,e.verifyRenamedParams(a,{defaultZoom:"zoom",placemarks:"latLng"}));a=b.extend({},e.defaults,a);ymaps.ready(function(){var c=e.preparePlacemarks(a),f=c.getLength();if(0<f){a.$element=b(a.element);0==a.$element.height()&&a.$element.height(400);var d=new ymaps.Map(a.element,{center:c.get(0).geometry.getCoordinates(),zoom:a.defaultZoom,type:"yandex#"+
a.defaultType,controls:[]});d.controls.add("zoomControl").add("typeSelector").add("fullscreenControl").add("geolocationControl").add("rulerControl",{"float":"left"});a.scrollZoom||d.behaviors.disable("scrollZoom");d.geoObjects.add(c);if(1<f)if(a.$element.is(":hidden"))d.events.once("sizechange",function(){d.setBounds(c.getBounds())});else d.setBounds(c.getBounds());b.isArray(a.mapCenterOffset)&&2==a.mapCenterOffset.length&&(f=d.getGlobalPixelCenter(),d.setGlobalPixelCenter([f[0]-a.mapCenterOffset[0],
f[1]-a.mapCenterOffset[1]]));a.$element.data("ddYMap",{map:d}).trigger("ddAfterInit")}})}}});b.fn.ddYMap=function(a){var e=b.ddYMap;return b(this).each(function(){e.init(b.extend(a,{element:this}))})}})(jQuery);